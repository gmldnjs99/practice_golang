# Go 언어를 활용한 데이터 수집 및 파이프라인 개발

## Introduction

**실시간 및 과거 주식 데이터를 수집하고, 이를 저장 및 분석하여 투자 참고 정보를 제공하는 데이터 파이프라인 구축 관련 repository입니다.** 

## 기본 정보

- **Base URL**: `http://localhost:8080`
- **Content-Type**: `application/json`

---

### API

| API 종류 | HTTP Method |        기능        |       url      |                                          설명                                          |
|:--------:|:--------:|:------------------:|:-------------------:|:--------------------------------------------------------------------------------------:|
| 루트 페이지 |   GET   |  환영 메시지 반환 |        /       | 기본 엔드포인트, 서비스 정상 동작 여부 확인용. Welcome to Stock Data Pipeline! 메시지 제공. |
| 헬스 체크 |  GET  |    헬스 체크   |      /health     | 서버가 정상적으로 동작하는지 상태 확인. { "status": "ok" } 반환.                           |
| 파비콘 무시         |  GET  |      파비콘 요청 무시     |     /favicon.ico    | 불필요한 파비콘 요청을 무시하고, 204 No Content 반환.       |
| 삼성전자 주식 저장         |   POST   |   삼성전자 및 삼성전자 우선주 주식 저장   | /samsung-stocks	 | 삼성전자(005930), 삼성전자우(005935) 주식 가격을 네이버 금융에서 크롤링 후 DB 저장.                |
| S&P 500 주식 저장         |   POST    |      Tiger 미국 S&P 500 주식 저장     |        /snp-stocks        | Tiger 미국 S&P 500 (360750) 주식 가격을 크롤링 후 DB에 저장.                                                                       |
|  개별 주식 데이터 저장 |   POST   |      특정 종목 주식 데이터 저장      |         /stock/:symbol        | 요청한 종목코드(symbol)의 주식 가격을 크롤링 후 DB 저장.                           |
| 저장된 주식 데이터 조회         |   GET   |     저장된 주식 데이터 전체 조회    |      /saved-stocks-info     | DB에 저장된 최근 주식 데이터 전체 조회.                                                             |

---
# API 목록

## 1. **루트 페이지**

### **GET** `/`
- **설명**: API 기본 페이지를 보여주는 엔드포인트입니다.
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "message": "Welcome to Stock Data Pipeline!"
    }
    ```

---

## 2. **헬스 체크**

### **GET** `/health`
- **설명**: 서버 상태를 확인하는 헬스 체크 엔드포인트입니다.
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "status": "ok"
    }
    ```

---

## 3. **favicon.ico**

### **GET** `/favicon.ico`
- **설명**: 이 엔드포인트는 favicon 요청을 무시합니다.
- **응답**:
  - **상태 코드**: 204 No Content

---

## 4. **주식 데이터 수집 및 저장**

### **POST** `/samsung-stocks`
- **설명**: 삼성전자(005930)와 삼성전자 우선주(005935)의 주식 데이터를 수집하고 DB에 저장합니다.
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "message": "Samsung stock data saved to DB"
    }
    ```

### **POST** `/snp-stocks`
- **설명**: TIGER 미국 S&P500 ETF(360750)의 주식 데이터를 수집하고 DB에 저장합니다.
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "message": "S&P500 ETF stock data saved to DB"
    }
    ```

---

## 5. **주식 데이터 수집 및 저장 (symbol 동적 처리)**

### **POST** `/stock`
- **설명**: 주식 심볼을 제공하면 해당 주식의 데이터를 수집하고 DB에 저장합니다.
- **요청 본문**:
  ```json
  {
    "symbol": "주식 심볼"
  }
  ```
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "message": "Stock data saved successfully",
      "data": {
        "symbol": "주식 심볼",
        "name": "주식 이름",
        "price": "주식 가격"
      }
    }
    ```

---

## 6. **최근 저장된 주식 데이터 조회**

### **GET** `/saved-stocks-info`
- **설명**: DB에 저장된 최근 주식 데이터를 조회합니다.
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "data": [
        {
          "symbol": "주식 심볼",
          "name": "주식 이름",
          "price": "주식 가격"
        },
        {
          "symbol": "다른 주식 심볼",
          "name": "다른 주식 이름",
          "price": "다른 주식 가격"
        }
      ]
    }
    ```

---

## 7. **주식 관련 뉴스 검색**

### **POST** `/stock-news`
- **설명**: 주식 심볼을 기반으로 해당 주식의 뉴스 데이터를 가져옵니다.
- **요청 본문**:
  ```json
  {
    "symbol": "주식 심볼"
  }
  ```
- **응답**:
  - **상태 코드**: 200 OK
  - **본문**: 
    ```json
    {
      "message": "News data retrieved successfully",
      "data": [
        {
          "title": "뉴스 제목",
          "link": "뉴스 링크",
          "published_at": "뉴스 발행 시간",
          "source": "뉴스 출처"
        },
        {
          "title": "다른 뉴스 제목",
          "link": "다른 뉴스 링크",
          "published_at": "다른 뉴스 발행 시간",
          "source": "다른 뉴스 출처"
        }
      ]
    }
    ```

---

## **공통 오류 응답**

모든 API에서 오류가 발생할 경우, 다음과 같은 형식으로 응답을 반환합니다:

- **상태 코드**: 오류에 해당하는 상태 코드 (예: 400, 500 등)
- **본문**:
  ```json
  {
    "error": "오류 메시지"
  }
  ```
---